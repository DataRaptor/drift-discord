# ðŸ¦¾ API

## Overview 

This is an Express API for linking Drift user's discord account with their Solana Wallet.

The application is deployed here: `<INSERT_LINK>`

## Configuration

This services requires a decent amount of configuration through a `.env` file. The following is an example `.env` file with types and descriptions for each variable.

```
PORT=[int] // The port that this service will run on.
MONGO_CONN_STRING=[string] // A mongodb connection string.
DISCORD_API=[string] // The url to the discord api, including it's version.
DISCORD_CLIENT_ID=[string] // The Oauth client id generated by discord.
DISCORD_SECRET=[string] // The Oauth secret generated by discord.
DISCORD_REDIRECT_URI=[string] // The url to `getDiscordRedirect` route. 
DISCORD_GENERATED_URL=[string] // The url generated by discord to allow users to accept authorizing our discord developer app.
DRIFT_MESSAGE=[string] // The message that you would like users to sign with their wallet.
CLIENT_URL=[string] // The url of the client so that the API can redirect after the user has authorized through discord.
AES_HTTP_TRANSPORT_SECRET=[string] // An AES secret for encrypting discord access tokens between the API and Client.
```

## Installation

To install node_modules run:

    yarn run install

## Development

To start the development server run: 

    yarn run dev

## Build

To create a production build of the service run: 

    yarn run build

To start the production build run:

    yarn run start

## Deployment

The code on the `main` branch is deployed to GCP cloud-run. Configuration files can be found in the `/gcp` directory on the top level of the repo.

## TODO

- Continue to factor out more components until
- Factor out some of the more complex logic in the `socials-component`
- Use tailwind css for styling. What we have works fine but if we want to add more to this webapp, we should put our styles in a css framework. 